# 03. マニフェストとkubectl 📜

K8sへの指示書である「マニフェストファイル (YAML)」と、それを適用するコマンドツール `kubectl` について解説します。

## 1. マニフェストファイル (YAML)
K8sの「あるべき状態」を記述する設計図です。

### 例: Nginxを3つ動かす設定 (deployment.yaml)
```yaml
apiVersion: apps/v1
kind: Deployment        # 何を作るか（デプロイメント）
metadata:
  name: my-nginx
spec:
  replicas: 3           # 3つ起動する
  selector:
    matchLabels:
      app: nginx
  template:             # Podのテンプレート（中身）
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80
```

## 2. kubectl (キューブカトル / クーベコントロール)
K8sクラスターを操作するためのコマンドラインツールです。

### 基本コマンド

#### 適用 (Apply)
マニフェストファイルを渡して、その状態にする。
```bash
kubectl apply -f deployment.yaml
```

#### 確認 (Get)
リソースの一覧を見る。
```bash
kubectl get pods    # Pod一覧
kubectl get deploy  # Deployment一覧
kubectl get svc     # Service一覧
```

#### 詳細確認 (Describe)
エラー時の調査などで使う。
```bash
kubectl describe pod [ポッド名]
```

#### 削除 (Delete)
リソースを削除する。
```bash
kubectl delete -f deployment.yaml
```

## まとめ
K8sは非常に奥が深いですが、まずは**「YAMLを書いて、`kubectl apply` すると、その通りにインフラが出来上がる」** という感覚を掴むことが重要です。
Cloud RunやEKS/GKEなど、クラウドサービスを使う場合もこの基本概念は変わりません。

---

## 📚 用語集 (Glossary)

| 用語 | 意味 | 補足 |
|------|------|-----|
| **Manifest** | マニフェスト | 宣言的設定ファイル (YAML) |
| **YAML (ヤムル)** | データ記述形式 | インデントが命 |
| **kubectl** | コマンドラインツール | K8sへの命令は全てこれ経由 |
| **Apply** | 適用する | 「この状態になれ」という命令 |
| **Namespace** | 名前空間 | クラスター内の部屋分け (dev, prodなど) |

## 🛠️ コマンド集 (kubectl)

| コマンド | 説明 |
|---|---|
| `kubectl apply -f [file]` | ファイルを適用してリソースを作成/更新 |
| `kubectl get [resource]` | リソースの一覧を表示 |
| `kubectl describe [resource] [name]` | リソースの詳細情報を表示（エラー調査用） |
| `kubectl delete -f [file]` | ファイルに書かれたリソースを削除 |
| `kubectl delete [resource] [name]` | 名前を指定して削除 |
