# 13_Widgetãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ« ğŸ”„

ã€Œç”»é¢ãŒé–‹ã„ãŸç¬é–“ã«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ãŸã„ã€ã€Œç”»é¢ã‚’é–‰ã˜ãŸã‚‰å‹•ç”»ã‚’æ­¢ã‚ãŸã„ã€
ãã‚“ãªæ™‚ã«å¿…è¦ãªã®ãŒãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç†è§£ã§ã™ã€‚

## 1. Stateless vs Stateful
- **StatelessWidget**: çŠ¶æ…‹ã‚’æŒãŸãªã„ã€‚ä¸€åº¦æç”»ã•ã‚ŒãŸã‚‰å¤‰ã‚ã‚‰ãªã„ï¼ˆé™çš„ï¼‰ã€‚è»½é‡ã€‚
- **StatefulWidget**: çŠ¶æ…‹ï¼ˆStateï¼‰ã‚’æŒã¤ã€‚`setState()` ã§ç”»é¢ã‚’æ›´æ–°ã§ãã‚‹ï¼ˆå‹•çš„ï¼‰ã€‚ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚‹ã€‚

ConsumerWidget (Riverpod) ã¯åŸºæœ¬çš„ã« StatelessWidget ã®å¼·åŒ–ç‰ˆã§ã™ãŒã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãŒå¿…è¦ãªã¨ãã¯ `ConsumerStatefulWidget` ã‚’ä½¿ã„ã¾ã™ã€‚

## 2. ä¸»ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ (`StatefulWidget`)

### `initState()`
**ç”Ÿã¾ã‚ŒãŸç¬é–“**ã«1å›ã ã‘å‘¼ã°ã‚Œã¾ã™ã€‚
- ä½¿ã„æ‰€: å¤‰æ•°ã®åˆæœŸåŒ–ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ä½œæˆã€Streamã®è³¼èª­é–‹å§‹ã€‚
- æ³¨æ„: ã“ã“ã§ `context` ã‚’ä½¿ã†å‡¦ç†ï¼ˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºãªã©ï¼‰ã¯ã§ãã¾ã›ã‚“ã€‚

### `build()`
**æç”»ãŒå¿…è¦ãªãŸã³**ã«ä½•åº¦ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚
- ä½¿ã„æ‰€: UIã‚’ä½œã‚‹ã€‚
- æ³¨æ„: ã“ã“ã«é‡ã„å‡¦ç†ï¼ˆé€šä¿¡ãªã©ï¼‰ã‚’æ›¸ã„ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã®åŸå› ã«ãªã‚Šã¾ã™ã€‚

### `dispose()`
**æ­»ã¬ï¼ˆç”»é¢ã‹ã‚‰æ¶ˆãˆã‚‹ï¼‰ç›´å‰**ã«1å›ã ã‘å‘¼ã°ã‚Œã¾ã™ã€‚
- ä½¿ã„æ‰€: ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ç ´æ£„ï¼ˆ`controller.dispose()`ï¼‰ã€Streamã®è³¼èª­è§£é™¤ã€‚
- **é‡è¦**: ã“ã‚Œã‚’å¿˜ã‚Œã‚‹ã¨ã€Œãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ï¼ˆãƒ¡ãƒ¢ãƒªã®ã‚´ãƒŸãŒæ®‹ã‚‹ï¼‰ã€ã®åŸå› ã«ãªã‚Šã¾ã™ã€‚

```dart
class MyPage extends StatefulWidget {
  @override
  _MyPageState createState() => _MyPageState();
}

class _MyPageState extends State<MyPage> {
  final _controller = TextEditingController();

  @override
  void initState() {
    super.initState();
    print("1. åˆæœŸåŒ–");
  }

  @override
  void dispose() {
    print("3. ãŠç‰‡ä»˜ã‘");
    _controller.dispose(); // å¿…é ˆï¼
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    print("2. æç”»");
    return Container();
  }
}
```

## 3. Riverpod æ™‚ä»£ã®è€ƒãˆæ–¹
Riverpod ã‚’ä½¿ã†ã¨ã€ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨Widgetã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’åˆ†é›¢ã§ãã¾ã™ã€‚

- ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆé€šä¿¡ï¼‰ãªã©ã¯ Provider (`notifyListeners` ã‚„ `build` ãƒ¡ã‚½ãƒƒãƒ‰) ã§è¡Œã†ã€‚
- `dispose` ã ã‘ã¯ Widget å´ã§æ„è­˜ã™ã‚‹ï¼ˆå‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç ´æ£„ãªã©ï¼‰ã€‚

å¯èƒ½ãªé™ã‚Šãƒ­ã‚¸ãƒƒã‚¯ã‚’ Provider ã«é€ƒãŒã—ã€Widget ã¯ `Stateless` (ConsumerWidget) ã§æ¸ˆã¾ã›ã‚‹ã®ãŒãƒ¢ãƒ€ãƒ³ãªè¨­è¨ˆã§ã™ã€‚

---

## ğŸ“š ç”¨èªé›† (Glossary)

| ç”¨èª | æ„å‘³ | é–¢é€£ |
|------|------|-----|
| **Lifecycle (ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«)** | ç”Ÿæˆã‹ã‚‰ç ´æ£„ã¾ã§ã®ãã®ä¸€ç”Ÿ | ç”Ÿã¾ã‚ŒãŸã€æç”»ã—ãŸã€æ­»ã‚“ã  |
| **Stateless** | çŠ¶æ…‹ã‚’æŒãŸãªã„ | é™çš„ |
| **Stateful** | çŠ¶æ…‹ã‚’æŒã¤ | å‹•çš„ |
| **State** | Widgetã®çŠ¶æ…‹ãƒ‡ãƒ¼ã‚¿ | å¤‰åŒ–ã™ã‚‹ã‚‚ã® |
| **BuildContext** | è‡ªåˆ†ã®ã€Œå±…å ´æ‰€ã€ã‚’çŸ¥ã‚‹ãŸã‚ã®æƒ…å ± | ã€Œè¦ªã¯èª°ï¼Ÿã€ãªã©ãŒã‚ã‹ã‚‹ |
| **Mount** | ç”»é¢ãƒ„ãƒªãƒ¼ã«çµ„ã¿è¾¼ã¾ã‚Œã‚‹ã“ã¨ | ã€Œç”Ÿã¾ã‚ŒãŸã€ |
| **Unmount** | ç”»é¢ãƒ„ãƒªãƒ¼ã‹ã‚‰å¤–ã•ã‚Œã‚‹ã“ã¨ | ã€Œæ­»ã‚“ã ã€ |

