# 03. ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã¨kubectl ğŸ“œ

K8sã¸ã®æŒ‡ç¤ºæ›¸ã§ã‚ã‚‹ã€Œãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« (YAML)ã€ã¨ã€ãã‚Œã‚’é©ç”¨ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ„ãƒ¼ãƒ« `kubectl` ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

## 1. ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« (YAML)
K8sã®ã€Œã‚ã‚‹ã¹ãçŠ¶æ…‹ã€ã‚’è¨˜è¿°ã™ã‚‹è¨­è¨ˆå›³ã§ã™ã€‚

### ä¾‹: Nginxã‚’3ã¤å‹•ã‹ã™è¨­å®š (deployment.yaml)
```yaml
apiVersion: apps/v1
kind: Deployment        # ä½•ã‚’ä½œã‚‹ã‹ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆï¼‰
metadata:
  name: my-nginx
spec:
  replicas: 3           # 3ã¤èµ·å‹•ã™ã‚‹
  selector:
    matchLabels:
      app: nginx
  template:             # Podã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆä¸­èº«ï¼‰
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80
```

## 2. kubectl (ã‚­ãƒ¥ãƒ¼ãƒ–ã‚«ãƒˆãƒ« / ã‚¯ãƒ¼ãƒ™ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«)
K8sã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

### åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

#### é©ç”¨ (Apply)
ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¸¡ã—ã¦ã€ãã®çŠ¶æ…‹ã«ã™ã‚‹ã€‚
```bash
kubectl apply -f deployment.yaml
```

#### ç¢ºèª (Get)
ãƒªã‚½ãƒ¼ã‚¹ã®ä¸€è¦§ã‚’è¦‹ã‚‹ã€‚
```bash
kubectl get pods    # Podä¸€è¦§
kubectl get deploy  # Deploymentä¸€è¦§
kubectl get svc     # Serviceä¸€è¦§
```

#### è©³ç´°ç¢ºèª (Describe)
ã‚¨ãƒ©ãƒ¼æ™‚ã®èª¿æŸ»ãªã©ã§ä½¿ã†ã€‚
```bash
kubectl describe pod [ãƒãƒƒãƒ‰å]
```

#### å‰Šé™¤ (Delete)
ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹ã€‚
```bash
kubectl delete -f deployment.yaml
```

## ã¾ã¨ã‚
K8sã¯éå¸¸ã«å¥¥ãŒæ·±ã„ã§ã™ãŒã€ã¾ãšã¯**ã€ŒYAMLã‚’æ›¸ã„ã¦ã€`kubectl apply` ã™ã‚‹ã¨ã€ãã®é€šã‚Šã«ã‚¤ãƒ³ãƒ•ãƒ©ãŒå‡ºæ¥ä¸ŠãŒã‚‹ã€** ã¨ã„ã†æ„Ÿè¦šã‚’æ´ã‚€ã“ã¨ãŒé‡è¦ã§ã™ã€‚
Cloud Runã‚„EKS/GKEãªã©ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã†å ´åˆã‚‚ã“ã®åŸºæœ¬æ¦‚å¿µã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚
