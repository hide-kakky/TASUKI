# 03_SREと可観測性(Observability) 📊

リリースはゴールではありません。スタートです。
動いているシステムの状態を知り、健康に保つ活動（SRE: Site Reliability Engineering）について学びます。

## 1. 監視の3本柱

### Metrics (メトリクス) - 「数値」
- CPU使用率、メモリ使用量、HTTPリクエスト数、エラー率。
- 「今、何かおかしいか？」を検知するのに使います。
- ツール: Prometheus, Grafana, Datadog

### Logging (ログ) - 「記録」
- 「いつ、誰が、何をしたか」。エラーの詳細メッセージ。
- 「なぜおかしくなったか？」を調査するのに使います。
- 構造化ログ (JSONログ) にすると、検索や集計がしやすくなります。
- ツール: CloudWatch Logs, Fluentd

### Tracing (トレーシング) - 「足跡」
- 1つのリクエストが、マイクロサービス間をどう渡り歩いたか追跡する。
- 「どこで時間がかかっているか（ボトルネック）」を特定するのに使います。
- ツール: OpenTelemetry, Jaeger

## 2. SLI / SLO / SLA

- **SLI (Indicator)**: 指標。「レスポンスタイム」「可用性(%)」などの実際の数値。
- **SLO (Objective)**: 目標。「可用性 99.9% を目指す」。内部目標。
- **SLA (Agreement)**: 保証（契約）。「99.9% 下回ったら返金します」。顧客との約束。

エンジニアが守るべきは **SLO** です。
100%を目指してはいけません。100%を目指すと変化（リリース）ができなくなるからです。
「エラー予算 (Error Budget)」という考え方により、**「残り0.1%分は失敗してもいいから、その分攻めたリリースをしよう」** というのがSREの精神です。

## 3. ポストモーテム (事後検死)
障害が起きた後、「誰が悪かったか」を探す犯人探しは最悪です。
「**仕組みのどこが悪かったか**」を分析し、ドキュメントに残します。

- 根本原因分析 (Why-Why分析): 「なぜ落ちた？」→「メモリ不足」→「なぜ？」→「設定ミス」→「なぜ？」→「自動チェックがなかったから」→「自動チェックを入れよう（対策）」

---

## 📚 用語集 (Glossary)

| 用語 | 意味 | 関連 |
|------|------|-----|
| **SRE** | Site Reliability Engineering | 信頼性を高めるエンジニアリング |
| **Observability** | 可観測性 | 中身が見える状態 |
| **Metrics** | 数値データ | グラフにできるもの |
| **Logging** | テキスト記録 | 詳細調査用 |
| **Tracing** | 追跡 | 分散システムの犯人探し |
| **SLI** | 指標（実測値） | 今どうなってる？ |
| **SLO** | 目標値 | ここまでは許容する |
| **SLA** | 保証値 | 破るとペナルティ |
| **Error Budget** | エラー予算 | 失敗してもいい余裕 |
| **Postmortem** | 振り返り・検死 | 二度と同じ失敗をしないために書く |

