# 17_アニメーション完全ガイド 🎬

「動くと気持ちいい」「どう動いているかわかる」。
アニメーションは単なる装飾ではなく、**UX（ユーザー体験）の要**です。

## 1. 2つのアプローチ

### Implicit Animations (暗黙的)
「**結果だけ指定して、あとはお任せ**」
- **簡単**。値を変えるだけで勝手に補間してくれる。
- `AnimatedContainer`, `AnimatedOpacity`, `AnimatedPadding` など。
- 「ボタンを押したら色をじわっと変えたい」ならまずこれ。

```dart
AnimatedOpacity(
  opacity: isVisible ? 1.0 : 0.0,
  duration: Duration(seconds: 1), // 1秒かけて変化
  child: Text("Hello"),
)
```

### Explicit Animations (明示的)
「**AnimationControllerで完全に制御する**」
- **自由自在**。一時停止、逆再生、ループ、複数アニメーションの連携が可能。
- `AnimationController`, `Transition系Widget` (`ScaleTransition`, `FadeTransition`)。
- `initState` と `dispose` でコントローラーの管理が必要。

```dart
// コントローラー定義
animationController = AnimationController(
  vsync: this, // 画面のリフレッシュレートと同期
  duration: Duration(seconds: 2),
);
// 開始
animationController.forward();
```

## 2. Hero アニメーション
ページ遷移時に、「画像が次の画面の場所に飛んでいく」エフェクトです。
やり方は超簡単。遷移元と遷移先の同じ画像を `Hero` Widgetで囲み、同じ `tag` をつけるだけです。

```dart
Hero(
  tag: 'product-image-1',
  child: Image.network(...),
)
```

## 3. 物理シミュレーション (Physics)
`Simulation` クラスを使うと、「バネの動き」や「重力落下」などを表現できます。
Flutterのスクロールが気持ちいいのは、この物理シミュレーションが組み込まれているからです。

## 4. パフォーマンスの注意点
アニメーション中は **1秒間に60回 (60fps)** の描画が行われます。
- `build` メソッドの中で重い処理をしない。
- `AnimatedBuilder` を使って、**再描画が必要な部分だけ** をリビルドするように局所化する。
- 巨大なリスト全体をアニメーションさせない。

---

## 📚 用語集 (Glossary)

| 用語 | 意味 | 例 |
|------|------|-----|
| **Implicit (暗黙的)** | 簡単なアニメーション | `AnimatedContainer` |
| **Explicit (明示的)** | 複雑なアニメーション | `AnimationController` |
| **Duration** | アニメーションにかかる時間 | `seconds: 1` |
| **Curve (カーブ)** | 動きの緩急 | `Curves.easeOut` (ゆっくり止まる) |
| **Hero** | 画面をまたいで飛ぶアニメーション | アルバムから詳細への移動 |
| **FPS** | Frames Per Second | 60fpsならヌルヌル、30fpsだとカクカク |
| **Tween** | 開始値と終了値の間 (Between) | `Tween(begin: 0, end: 100)` |

