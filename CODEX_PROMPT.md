# CODEX プロンプトテンプレート

Codex（AI エージェント）へ依頼する前に、このドキュメントを埋めて明確で実装可能なリクエストを伝える。簡潔さと曖昧さの排除を両立させること。

## 1. プロジェクト概要
- **プロダクト**：`BATON`（参照：`docs/BATON_requirements_v8.5.md`）
- **現在の状況**：_マイルストーン / スプリント / 最近の決定事項 / ブロッカー_
- **オーナー**：_主要な連絡先_

## 2. 目的
- **ゴール定義**：_Codex が完了したときに期待する成果_
- **成功指標**：_定量もしくは観測可能な検証ステップを箇条書きで_

## 3. 成果物
各成果物ごとに以下を記載する：
1. **名称 / パス**（例：`app/lib/...`）
2. **概要**（機能要件 + 非機能要件）
3. **受け入れテスト**（手動 / 自動のいずれか）

## 4. 制約とガードレール
- **技術スタック**：_言語 / フレームワーク / バージョン_
- **アーキテクチャ / パターン**：_例：Riverpod, Repository, Edge Functions の構成_
- **非スコープ項目**：_Codex が触れてはいけない領域を明示_
- **依存関係**：_外部 API / フィーチャーフラグ / シークレット_

## 5. 参照資料
- **要件定義書**：`docs/BATON_requirements_v8.5.md`
- **実装手引書**：`docs/BATON_implementation_guide_v1.0.md`
- **デザイン / チケット**：_リンクまたは概要_
- **既存成果物**：_テスト / ドキュメント / ダッシュボードなど_

## 6. ワークフロー期待値
1. **ブランチ / コミットルール**
2. **テスト要件**（ユニット / ウィジェット / 統合テストなど）
3. **レビュー観点**（性能 / セキュリティ / UX など）

## 7. 未確定事項 / 前提
- _Codex が確認すべき不明点、もしくは許容される前提を列挙_

## 8. 出力フォーマット
Codex に求める成果物の提示方法（サマリ構成 / ファイル参照 / デモ手順など）を明記。  
複数人開発を想定し、**毎回「推奨ブランチ名」と「推奨コミットメッセージ」**を出力に含めること（例：`branch: feature/flow-upload` / `commit: feat: add mux webhook`）。  
コミットメッセージは必ず日本語で記載すること（例：`commit: feat: Mux の Webhook を追加`）。

## 9. AI エージェントへの要件
- **使用言語**：回答・コードコメント・説明は必ず日本語で行うこと（例外が必要な場合のみ、補足として英語併記可）。
- **コミュニケーション**：不足情報や曖昧な仕様があれば必ず質問を返す。
- **トレーサビリティ**：変更ファイルと目的を明確に示し、検証ステップを記録する。
- **ガードレール遵守**：本テンプレートに記載された制約を逸脱しそうな場合は必ず事前確認を行う。
- **参照徹底**：`docs/BATON_requirements_v8.5.md` / `.yaml` と `docs/BATON_implementation_guide_v1.0.md` / `.yaml` を毎回読み、要件を引用した上で作業方針を決めること。

> このドキュメントを埋め終えたら、作業ディレクトリと共に共有し、Codex が単一の信頼できる情報源を持てるようにする。

